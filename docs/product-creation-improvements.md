# –£–ª—É—á—à–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤

## üìÖ –î–∞—Ç–∞: –î–µ–∫–∞–±—Ä—å 2025

## üéØ –¶–µ–ª—å
–ò—Å–ø—Ä–∞–≤–∏—Ç—å –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ —Å–∏—Å—Ç–µ–º–µ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ CRM, –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Ä–∞–±–æ—Ç—É —Å –ª–∏—Å—Ç–æ–≤—ã–º–∏ –∏ –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–º–∏ –∏–∑–¥–µ–ª–∏—è–º–∏, —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞–º–∏.

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö** 
**–§–∞–π–ª**: `backend/schema/current_schema.sql`

**–ü—Ä–æ–±–ª–µ–º–∞**: –û—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞–ª–∏ –ø–æ–ª—è `calculator_type` –∏ `product_type` –≤ —Ç–∞–±–ª–∏—Ü–µ `products`.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ –ø–æ–ª—è:
```sql
calculator_type TEXT CHECK (calculator_type IN ('product','operation')) DEFAULT 'product',
product_type TEXT CHECK (product_type IN ('sheet_single','multi_page','universal','sheet_item','multi_page_item'))
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –°—Ö–µ–º–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏, –≤—Å–µ —Ç–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è.

---

### 2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ createProduct**
**–§–∞–π–ª**: `backend/src/controllers/productController.ts`

**–ü—Ä–æ–±–ª–µ–º–∞**: –°—Ç–∞—Ä—ã–π –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–ª –ø–æ–ª—è `calculator_type` –∏ `product_type`.

**–†–µ—à–µ–Ω–∏–µ**: 
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π –≤ –∑–∞–ø—Ä–æ—Å–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º
- –û–±–Ω–æ–≤–ª–µ–Ω SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π

**–ö–æ–¥**:
```typescript
// –í–∞–ª–∏–¥–∞—Ü–∏—è calculator_type
const validCalculatorTypes = ['product', 'operation'];
const resolvedCalculatorType = calculator_type && validCalculatorTypes.includes(calculator_type) 
  ? calculator_type 
  : 'product';

// –í–∞–ª–∏–¥–∞—Ü–∏—è product_type
const validProductTypes = ['sheet_single', 'multi_page', 'universal', 'sheet_item', 'multi_page_item'];
const resolvedProductType = product_type && validProductTypes.includes(product_type) 
  ? product_type 
  : null;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–µ–ø–µ—Ä—å –æ–±–∞ API endpoint (`/products` –∏ `/products/setup`) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ç–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤.

---

### 3. **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞–º–∏**
**–§–∞–π–ª—ã**: 
- `frontend/src/components/admin/ProductCreationWizard/steps/Step4Template.tsx`
- `frontend/src/components/admin/ProductCreationWizard/utils/productTypeFields.ts`

**–ü—Ä–æ–±–ª–µ–º–∞**: –õ–∏—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –º–æ–≥–ª–∏ –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑–º–µ—Ä, —Ö–æ—Ç—è –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–∏–∑–∏—Ç–∫–∏) —á–∞—Å—Ç–æ –∏–º–µ—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.

**–†–µ—à–µ–Ω–∏–µ**: 
- –¢–µ–ø–µ—Ä—å `MultiSizeManager` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è **–í–°–ï–•** —Ç–∏–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- –õ–∏—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã –º–æ–≥—É—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–æ–≤ (90√ó50, 85√ó55 –∏ —Ç.–¥.)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `format` –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ**:
```typescript
// –†–∞–Ω—å—à–µ (—Ç–æ–ª—å–∫–æ –¥–ª—è multi_page):
{form.product_type === 'multi_page' ? (
  <MultiSizeManager ... />
) : (
  <input ... /> // –û–¥–∏–Ω —Ä–∞–∑–º–µ—Ä
)}

// –¢–µ–ø–µ—Ä—å (–¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤):
<MultiSizeManager
  sizes={trimSizes}
  onAdd={handleAddSize}
  onUpdate={handleUpdateSize}
  onRemove={handleRemoveSize}
  productType={form.product_type}
/>
```

**–§—É–Ω–∫—Ü–∏—è shouldAutoAddFormatParameter**:
```typescript
// –†–∞–Ω—å—à–µ: —Ç–æ–ª—å–∫–æ –¥–ª—è multi_page
if (productType !== 'multi_page') return false;

// –¢–µ–ø–µ—Ä—å: –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤, –∫—Ä–æ–º–µ universal
if (productType === 'universal') return false;
if (sizes.length < 2) return false;
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: 
- ‚úÖ –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- ‚úÖ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ–∑–¥–∞–≤–∞—Ç—å –ª–∏—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏ —Ä–∞–∑–º–µ—Ä–æ–≤
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ `format` –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ä–∞–∑–º–µ—Ä–∞

---

### 4. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–æ–∫ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏**
**–§–∞–π–ª**: `frontend/src/components/admin/ProductCreationWizard/steps/Step1BasicInfo.tsx`

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –ø–æ–Ω–∏–º–∞–ª–∏ —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–µ Alert-–±–ª–æ–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ç–∞:

```typescript
{form.product_type === 'sheet_single' && (
  <Alert type="info">
    <strong>üìÑ –õ–∏—Å—Ç–æ–≤–æ–µ –∏–∑–¥–µ–ª–∏–µ</strong>
    <span>–û–¥–∏–Ω –ª–∏—Å—Ç –±—É–º–∞–≥–∏ —Å –ø–µ—á–∞—Ç—å—é. –ú–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–æ–≤. 
    –ü—Ä–∏–º–µ—Ä—ã: –≤–∏–∑–∏—Ç–∫–∏, –ª–∏—Å—Ç–æ–≤–∫–∏, —Ñ–ª–∞–µ—Ä—ã, –Ω–∞–∫–ª–µ–π–∫–∏.</span>
  </Alert>
)}

{form.product_type === 'multi_page' && (
  <Alert type="info">
    <strong>üìö –ú–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ</strong>
    <span>–ò–∑–¥–µ–ª–∏–µ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å –ø–µ—Ä–µ–ø–ª–µ—Ç–æ–º. 
    –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü –∏ —Ç–∏–ø —Å–∫—Ä–µ–ø–ª–µ–Ω–∏—è. 
    –ü—Ä–∏–º–µ—Ä—ã: –±—É–∫–ª–µ—Ç—ã, –±—Ä–æ—à—é—Ä—ã, –∫–∞—Ç–∞–ª–æ–≥–∏, –∂—É—Ä–Ω–∞–ª—ã.</span>
  </Alert>
)}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç —á–µ—Ç–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø—Ä–∏ –≤—ã–±–æ—Ä–µ —Ç–∏–ø–∞ –ø—Ä–æ–¥—É–∫—Ç–∞.

---

## üìä –°—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞: –î–æ –∏ –ü–æ—Å–ª–µ

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |
|---------------|----------------|-------------------|
| **–°—Ö–µ–º–∞ –ë–î** | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ–ª—è `calculator_type`, `product_type` | ‚úÖ –ü–æ–ª—è –¥–æ–±–∞–≤–ª–µ–Ω—ã —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π |
| **–°—Ç–∞—Ä—ã–π API** | –ù–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤ | ‚úÖ –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç |
| **–õ–∏—Å—Ç–æ–≤—ã–µ —Ä–∞–∑–º–µ—Ä—ã** | –¢–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑–º–µ—Ä | ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã |
| **–ú–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã** | –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã | ‚úÖ –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã |
| **–ü–∞—Ä–∞–º–µ—Ç—Ä format** | –¢–æ–ª—å–∫–æ –¥–ª—è multi_page | ‚úÖ –î–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤ |
| **–ü–æ–¥—Å–∫–∞–∑–∫–∏ UI** | –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç | ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ |
| **–£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è** | –†–∞–∑–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –¥–ª—è —Ç–∏–ø–æ–≤ | ‚úÖ –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å |

---

## üé® –¢–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤: –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### üìÑ **–õ–∏—Å—Ç–æ–≤–æ–µ –∏–∑–¥–µ–ª–∏–µ (sheet_single)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –û–¥–∏–Ω –ª–∏—Å—Ç –±—É–º–∞–≥–∏ —Å –ø–µ—á–∞—Ç—å—é
- **–†–∞–∑–º–µ—Ä—ã**: –û–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–æ–≤ (90√ó50, 85√ó55)
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –ú–∞—Ç–µ—Ä–∏–∞–ª, –ø–ª–æ—Ç–Ω–æ—Å—Ç—å, —Å—Ç–æ—Ä–æ–Ω—ã –ø–µ—á–∞—Ç–∏
- **–û–ø–µ—Ä–∞—Ü–∏–∏**: –ü–µ—á–∞—Ç—å, —Ä–µ–∑–∫–∞, –ª–∞–º–∏–Ω–∞—Ü–∏—è
- **–†–∞—Å—á–µ—Ç**: –ü–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–∏—Å—Ç–æ–≤
- **–ü—Ä–∏–º–µ—Ä—ã**: –í–∏–∑–∏—Ç–∫–∏, –ª–∏—Å—Ç–æ–≤–∫–∏, —Ñ–ª–∞–µ—Ä—ã, –Ω–∞–∫–ª–µ–π–∫–∏

### üìö **–ú–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ (multi_page)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ò–∑–¥–µ–ª–∏–µ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å –ø–µ—Ä–µ–ø–ª–µ—Ç–æ–º
- **–†–∞–∑–º–µ—Ä—ã**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞—Ç–æ–≤ (A4, A5, A6)
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã**: 
  - `pages` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–∞–Ω–∏—Ü (8, 16, 24, 32, ...)
  - `binding` ‚Äî —Ç–∏–ø —Å–∫—Ä–µ–ø–ª–µ–Ω–∏—è (—Å–∫—Ä–µ–ø–∫–∞, –∫–ª–µ–π, —Å–ø–∏—Ä–∞–ª—å)
- **–û–ø–µ—Ä–∞—Ü–∏–∏**: –ü–µ—á–∞—Ç—å, —Ñ–∞–ª—å—Ü–æ–≤–∫–∞, —Å–∫—Ä–µ–ø–ª–µ–Ω–∏–µ, —Ä–µ–∑–∫–∞
- **–†–∞—Å—á–µ—Ç**: –ü–æ —Ç–µ—Ç—Ä–∞–¥—è–º/–±–ª–æ–∫–∞–º
- **–ü—Ä–∏–º–µ—Ä—ã**: –ë—É–∫–ª–µ—Ç—ã, –±—Ä–æ—à—é—Ä—ã, –∫–∞—Ç–∞–ª–æ–≥–∏, –∂—É—Ä–Ω–∞–ª—ã

### üîß **–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ (universal)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- **–†–∞–∑–º–µ—Ä—ã**: –ù–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**: –õ—é–±—ã–µ, –∑–∞–¥–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é
- **–û–ø–µ—Ä–∞—Ü–∏–∏**: –õ—é–±—ã–µ
- **–†–∞—Å—á–µ—Ç**: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π
- **–ü—Ä–∏–º–µ—Ä—ã**: –°–ª–æ–∂–Ω—ã–µ –º–Ω–æ–≥–æ–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–µ –∏–∑–¥–µ–ª–∏—è

### üìÑ **–õ–∏—Å—Ç–æ–≤–æ–µ –∏–∑–¥–µ–ª–∏–µ (–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä) (sheet_item)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –ª–∏—Å—Ç–æ–≤–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**: –¶–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –æ–ø–µ—Ä–∞—Ü–∏–π

### üìö **–ú–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–µ –∏–∑–¥–µ–ª–∏–µ (–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä) (multi_page_item)**
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–∞—Å—á–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å**: –¶–µ–Ω–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É –æ–ø–µ—Ä–∞—Ü–∏–π

---

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

**–í–∞–∂–Ω–æ**: –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –±–µ–∑ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –ø–æ–ª–µ–π `calculator_type` –∏ `product_type` –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
- `calculator_type` = `'product'`
- `product_type` = `NULL` (–±—É–¥–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏)

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã, —É–∫–∞–∑–∞–≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ç–∏–ø.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç-–∫–µ–π—Å—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–°–æ–∑–¥–∞–Ω–∏–µ –ª–∏—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏**
   - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç —Ç–∏–ø–∞ `sheet_single`
   - –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã: 90√ó50, 85√ó55, 80√ó45
   - ‚úÖ –î–æ–ª–∂–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Ç—å—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä `format`

2. **–°–æ–∑–¥–∞–Ω–∏–µ –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞**
   - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç —Ç–∏–ø–∞ `multi_page`
   - –î–æ–±–∞–≤–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã: A4, A5, A6
   - ‚úÖ –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∏ –æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö `pages` –∏ `binding`

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π API**
   - POST `/api/products` —Å –ø–æ–ª—è–º–∏ `calculator_type` –∏ `product_type`
   - ‚úÖ –ü–æ–ª—è –¥–æ–ª–∂–Ω—ã —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ë–î

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥—Å–∫–∞–∑–æ–∫ UI**
   - –û—Ç–∫—Ä—ã—Ç—å –º–∞—Å—Ç–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–∞
   - –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ç–∏–ø—ã –ø—Ä–æ–¥—É–∫—Ç–æ–≤
   - ‚úÖ –î–æ–ª–∂–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏

---

## üìù –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –ü—Ä–∏–º–µ—Ä 1: –í–∏–∑–∏—Ç–∫–∏ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏

```typescript
const businessCardProduct = {
  product: {
    name: '–í–∏–∑–∏—Ç–∫–∏ –ø—Ä–µ–º–∏—É–º',
    calculator_type: 'product',
    product_type: 'sheet_single',
    category_id: 1
  },
  template: {
    trim_sizes: [
      { width: '90', height: '50', label: '–°—Ç–∞–Ω–¥–∞—Ä—Ç' },
      { width: '85', height: '55', label: '–ï–≤—Ä–æ' },
      { width: '80', height: '45', label: '–ö–æ–º–ø–∞–∫—Ç' }
    ]
  },
  // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä:
  // format: ['–°—Ç–∞–Ω–¥–∞—Ä—Ç', '–ï–≤—Ä–æ', '–ö–æ–º–ø–∞–∫—Ç']
}
```

### –ü—Ä–∏–º–µ—Ä 2: –ë—É–∫–ª–µ—Ç—ã

```typescript
const bookletProduct = {
  product: {
    name: '–ë—É–∫–ª–µ—Ç—ã',
    calculator_type: 'product',
    product_type: 'multi_page',
    category_id: 2
  },
  template: {
    trim_sizes: [
      { width: '210', height: '297', label: 'A4' },
      { width: '148', height: '210', label: 'A5' }
    ]
  },
  parameters: [
    { name: 'pages', type: 'select', options: ['8', '16', '24', '32'] },
    { name: 'binding', type: 'select', options: ['staple', 'perfect', 'none'] }
  ]
}
```

---

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π

1. **–ï–¥–∏–Ω—ã–π –ø–æ–¥—Ö–æ–¥**: –í—Å–µ –ø—Ä–æ–¥—É–∫—Ç—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞–º–∏
2. **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–∏—Å—Ç–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã —Ç–µ–ø–µ—Ä—å –º–æ–≥—É—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ä–∞–∑–º–µ—Ä–æ–≤
3. **–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è**: –ü–∞—Ä–∞–º–µ—Ç—Ä `format` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–∑–º–µ—Ä–æ–≤
4. **–ü–æ–Ω—è—Ç–Ω–æ—Å—Ç—å**: –ß–µ—Ç–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ–º–æ–≥–∞—é—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –≤—ã–±—Ä–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–∏–ø –ø—Ä–æ–¥—É–∫—Ç–∞
5. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ë–î –∏ API
6. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å**: –°—Ö–µ–º–∞ –ë–î —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. –ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã –ë–î —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–Ω-–æ–∫—Ä—É–∂–µ–Ω–∏–∏
2. –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—Ä–æ–¥—É–∫—Ç—ã –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å, –¥–æ–±–∞–≤–∏–≤ –∏–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π `product_type`
3. –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ —Å—Ç–∞—Ä—ã–π API endpoint –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–∏–ø –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é `'product'`
4. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π endpoint `/products/setup` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Å –ø–æ–ª–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π

---

## üìö –°–≤—è–∑–∞–Ω–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- `docs/flexible-calculator-system.md` ‚Äî –ì–∏–±–∫–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
- `docs/pricing-operations-guide.md` ‚Äî –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ü–µ–Ω–æ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—é
- `backend/src/migrations/20251101000000_add_calculator_and_product_type_to_products.ts` ‚Äî –ú–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —Ç–∏–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤

---

## ‚ú® –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–í—Å–µ –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–¥—É–∫—Ç–æ–≤ —Ç–µ–ø–µ—Ä—å:
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ª–∏—Å—Ç–æ–≤—ã–º–∏ –∏ –º–Ω–æ–≥–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–º–∏ –∏–∑–¥–µ–ª–∏—è–º–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã –¥–ª—è –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤
- ‚úÖ –ò–º–µ–µ—Ç –µ–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- ‚úÖ –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —á–µ—Ç–∫–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º
- ‚úÖ –í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö

**–°—Ç–∞—Ç—É—Å**: –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é ‚úÖ

