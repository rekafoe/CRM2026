# Рефакторинг ServiceVolumeTiersPanel

## Проблема

Оригинальный файл `ServiceVolumeTiersPanel.tsx` содержал **282 строки кода**, что делало его:
- Сложным для понимания
- Трудным для поддержки
- С большим количеством смешанной логики (форма, валидация, UI, операции)

## Решение

Компонент разбит на модульную структуру:

### Структура файлов

```
components/admin/services/components/
├── ServiceVolumeTiersPanel.tsx     # Основной компонент (~123 строки)
├── hooks/
│   └── useTierForm.ts              # Хук для управления формой
├── TiersTable.tsx                  # Компонент таблицы
├── TierRow.tsx                     # Компонент строки с inline редактированием
└── CreateTierForm.tsx             # Компонент формы создания
```

### Что было вынесено

1. **Хук**
   - `useTierForm` - управление состоянием формы создания/редактирования, валидация, преобразование данных

2. **Компоненты**
   - `TiersTable` - отображение таблицы tiers с пустым состоянием
   - `TierRow` - отдельная строка с inline редактированием
   - `CreateTierForm` - форма создания нового tier

## Результат

- **Основной файл**: с 282 строк до 123 строк (сокращение на 56%)
- **Модульность**: каждый модуль отвечает за свою область
- **Переиспользуемость**: компоненты можно использовать в других местах
- **Тестируемость**: каждый модуль можно тестировать изолированно
- **Поддерживаемость**: изменения в одном месте не затрагивают другие

## Сравнение с другими рефакторингами

- `ServiceVariantsTable` (до): 1516 строк → (после): 535 строк (-65%)
- `ServicesManagement` (до): 625 строк → (после): 344 строки (-45%)
- `ServiceVolumeTiersPanel` (до): 282 строки → (после): 123 строки (-56%)

## Миграция

Старый файл сохранен как `ServiceVolumeTiersPanel.old.tsx` для справки.

Все функции работают так же, как и раньше, но код стал более организованным и понятным.
