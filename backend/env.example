# Server
PORT=8080
# CORS: один origin или несколько через запятую. Origin = схема + хост (без пути), напр. https://printcore.by
CORS_ORIGIN=https://printcore.by,https://crm-2026-llk4uk0ed-rekafoes-projects.vercel.app,http://localhost:5173
NODE_ENV=production

# Шаблоны документов (акт, счёт): путь к папке внутри volume. Без этой переменной загруженные шаблоны теряются при редеплое (Railway и др.).
# DOCUMENT_TEMPLATES_DIR=/data/document-templates
SHOW_ERROR_STACK=false
LOG_LEVEL=INFO

# Security
JWT_SECRET=your-secret-key-change-in-production
JWT_EXPIRY=24h
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=900000

# Публичный API заказов с сайта (POST /api/orders/from-website). Заголовок X-API-Key или Authorization: Bearer <key>.
# Если не задан — эндпоинт возвращает 503.
# WEBSITE_ORDER_API_KEY=your-website-api-key

# Bootstrap admin (создаётся автоматически при первом старте, если таблица users пустая)
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=change-me
ADMIN_NAME=Администратор

# Database
# По умолчанию можно хранить SQLite в WORKDIR контейнера/проекта (Railway создаст файл автоматически)
# Если нужна персистентность — подключите Railway Volume и укажите путь внутри volume, например: /data/data.db
DB_FILE=data.db

# Monitoring & Notifications
STOCK_MONITORING_ENABLED=true
STOCK_CHECK_INTERVAL=30
LOW_STOCK_THRESHOLD=120
CRITICAL_STOCK_THRESHOLD=100
DEFAULT_ORDER_EMAIL=ops@example.com

# Auto Ordering
AUTO_ORDER_ENABLED=false
AUTO_ORDER_THRESHOLD=80
MIN_ORDER_AMOUNT=100
MAX_ORDER_AMOUNT=10000
ORDER_FREQUENCY=weekly
PREFERRED_DELIVERY_DAYS=1,2,3,4,5
AUTO_APPROVE_ORDERS=false
ORDER_NOTIFICATIONS_ENABLED=true

# Telegram Bot
TELEGRAM_ENABLED=false
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=
TELEGRAM_WEBHOOK_URL=
TELEGRAM_BOT_USERNAME=
TELEGRAM_POLL_INTERVAL_MS=5000
TELEGRAM_POLL_TIMEOUT_MS=30000
TELEGRAM_LONGPOLL_TIMEOUT_SEC=25

# Analytics
SENTRY_DSN=

# Пересчёт ЗП: секрет для GET/POST /api/earnings/recalculate?secret=XXX (опционально)
# Если не задан — доступ только для admin. Если задан — можно вызвать без авторизации.
# RECALC_EARNINGS_SECRET=your-random-secret
