import { Database } from 'sqlite';
import { getDb } from '../db';

/**
 * –£–¥–∞–ª—è–µ—Ç –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ "material"
 * 
 * –ü—Ä–∏—á–∏–Ω–∞: –ù–∞—Ä—É—à–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª–∞ "–ù–ï –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨ –•–ê–†–î–ö–û–î"
 * 
 * –†–µ—à–µ–Ω–∏–µ: –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–æ–ª–∂–Ω—ã –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∏–∑ –≤–∫–ª–∞–¥–∫–∏ "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã" –ø—Ä–æ–¥—É–∫—Ç–∞.
 * –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä material_id —Å –∞–∫—Ç—É–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ —Å–∫–ª–∞–¥–∞.
 */

export async function up(db?: Database): Promise<void> {
  const database = db || await getDb();

  console.log('üóëÔ∏è –£–¥–∞–ª—è–µ–º –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ "material"...');
  
  // –£–¥–∞–ª—è–µ–º –≤—Å–µ –ø—Ä–µ—Å–µ—Ç—ã —Å –∫–ª—é—á–æ–º "material"
  const result = await database.run(
    `DELETE FROM product_parameter_presets WHERE preset_key = 'material'`
  );

  console.log(`‚úÖ –£–¥–∞–ª–µ–Ω–æ ${result.changes} –∑–∞—Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤ "material"`);
  
  // –¢–∞–∫–∂–µ —É–¥–∞–ª—è–µ–º —É—Å—Ç–∞—Ä–µ–≤—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä density, —Ç–∞–∫ –∫–∞–∫ –æ–Ω —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–µ–Ω –≤ material_id
  // (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
  console.log('‚ÑπÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä "density" –æ—Å—Ç–∞–≤–ª–µ–Ω –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏');
  
  console.log('');
  console.log('üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:');
  console.log('1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É —à–∞–±–ª–æ–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∞');
  console.log('2. –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∫–ª–∞–¥–∫—É "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã"');
  console.log('3. –î–æ–±–∞–≤—å—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏–∑ —Å–∫–ª–∞–¥–∞ —Å –Ω—É–∂–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –±—É–º–∞–≥–∏');
  console.log('4. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Å—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä material_id –≤ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–µ');
  console.log('');
}

export async function down(db?: Database): Promise<void> {
  const database = db || await getDb();
  
  console.log('‚ö†Ô∏è –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏: –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ö–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã...');
  
  // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–µ—Å–µ—Ç—ã (–¥–ª—è –æ—Ç–∫–∞—Ç–∞)
  await database.run(
    `INSERT OR IGNORE INTO product_parameter_presets (product_type, preset_key, label, field_type, options, is_required, sort_order)
     VALUES
      ('business_cards', 'material', '–ú–∞—Ç–µ—Ä–∏–∞–ª', 'select', '["–ú–µ–ª–æ–≤–∞–Ω–Ω–∞—è –≥–ª—è–Ω—Ü–µ–≤–∞—è","–ú–µ–ª–æ–≤–∞–Ω–Ω–∞—è –º–∞—Ç–æ–≤–∞—è","–ü–ª–æ—Ç–Ω–∞—è –¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∞—è","–õ—å–Ω—è–Ω–∞—è","–ö—Ä–∞—Ñ—Ç"]', 1, 50),
      ('flyers', 'material', '–ú–∞—Ç–µ—Ä–∏–∞–ª', 'select', '["–ë—É–º–∞–≥–∞ –æ—Ñ–∏—Å–Ω–∞—è","–ë—É–º–∞–≥–∞ –º–µ–ª–æ–≤–∞–Ω–Ω–∞—è","–ü–ª–æ—Ç–Ω–∞—è –¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∞—è"]', 1, 50),
      ('posters', 'material', '–ú–∞—Ç–µ—Ä–∏–∞–ª', 'select', '["–§–æ—Ç–æ–±—É–º–∞–≥–∞","–ë—É–º–∞–≥–∞ –ø–æ—Å—Ç–µ—Ä–Ω–∞—è","–ë–∞–Ω–Ω–µ—Ä"]', 1, 30),
      ('multi_page', 'material', '–ú–∞—Ç–µ—Ä–∏–∞–ª', 'select', '["–ë—É–º–∞–≥–∞ –æ—Ñ–∏—Å–Ω–∞—è","–ë—É–º–∞–≥–∞ –º–µ–ª–æ–≤–∞–Ω–Ω–∞—è","–ü–ª–æ—Ç–Ω–∞—è –¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∞—è","–ö–∞—Ä—Ç–æ–Ω"]', 1, 50)
    `
  );
  
  console.log('‚úÖ –•–∞—Ä–¥–∫–æ–∂–µ–Ω–Ω—ã–µ –ø—Ä–µ—Å–µ—Ç—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è!)');
}

